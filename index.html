<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interactive To‑Do List</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-gradient: linear-gradient(135deg, #e0e7ff 0%, #f7fafc 100%);
      --card: #ffffff;
      --accent: #705cf6;
      --accent-gradient: linear-gradient(95deg, #805efd 0%, #44d3ee 100%);
      --accent-dark: #4737c2;
      --accent-light: #e8e7fd;
      --muted: #878a99;
      --border: #eceeff;
      --border-focus: #b5cafc;
      --radius: 20px;
      --shadow: 0 8px 36px rgba(64,74,171,0.12), 0 1.5px 6px rgba(110,108,230,.09);
      --input-padding: 14px;
      --input-font-size: 1.04rem;
      --transition: 0.19s cubic-bezier(.53,.24,.17,1);
      --btn-shadow: 0 2px 10px #735ff42b;
    }
    html { box-sizing: border-box; }
    *, *:before, *:after { box-sizing: inherit; }
    body {
      margin: 0;
      padding: 0;
      background: var(--bg-gradient);
      color: #25264a;
      font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      transition: background .35s;
      font-size: 17px;
      line-height: 1.67;
    }
    .app {
      max-width: 600px;
      margin: 48px auto 0 auto;
      padding: 0 16px 48px 16px;
      position: relative;
    }
    .decorative-blob {
      pointer-events: none;
      position: fixed;
      top: -120px;
      right: -160px;
      width: 480px;
      height: 480px;
      background: radial-gradient(circle at 65% 35%, #a9b7ec 0, #b3e3ff 70%, transparent 100%);
      opacity: 0.28;
      filter: blur(30px);
      z-index: 0;
    }
    header {
      display: flex;
      gap: 20px;
      align-items: center;
      justify-content: space-between;
      margin: 0 0 1.1rem 0;
      position: relative;
      z-index: 2;
    }
    h1 {
      font-size: 2.15rem;
      margin: 0;
      font-weight: 700;
      background: var(--accent-gradient);
      background-clip: text;
      -webkit-background-clip: text;
      color: transparent;
      -webkit-text-fill-color: transparent;
      letter-spacing: -.02em;
      user-select: none;
      transition: color .17s;
      text-shadow: 0 3px 24px rgba(98,97,221,0.18);
    }
    .controls {
      display: none;
    }
    .card-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      margin-bottom: 16px;
      justify-content: flex-end;
    }
    .card-controls button {
      background: var(--accent-gradient);
      color: #fff;
      font-weight: 600;
      border: none;
      outline: none;
      border-radius: 7px;
      padding: 8px 15px;
      font-size: 0.97rem;
      cursor: pointer;
      box-shadow: var(--btn-shadow);
      transition: background .18s, box-shadow .22s, scale .13s;
      scale: 1;
      letter-spacing: .01em;
      margin-left: 0;
      margin-right: 0;
    }
    .card-controls .ghost {
      background: transparent;
      border: 1.3px solid var(--border);
      color: var(--accent);
      font-weight: 600;
      padding: 8px 15px;
      transition: border .18s, color .2s, background .17s;
      box-shadow: none;
    }
    .card-controls .ghost:focus,
    .card-controls .ghost:active {
      border-color: var(--accent-dark);
      color: var(--accent-dark);
      background: var(--accent-light);
    }
    .card-controls .btn.small, .card-controls .ghost.small {padding: 6px 14px; font-size: .98rem; }

    @media (max-width: 480px) {
      h1 { font-size: 1.2rem;}
      .card-controls { gap: 7px; }
    }
    .card {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 26px 22px 14px 22px;
      margin-top: 18px;
      margin-bottom: 0;
      width: 100%;
      transition: box-shadow var(--transition), background .22s;
      position: relative;
      z-index: 2;
    }
    .fields-group {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      margin-bottom: 18px;
      align-items: center;
      position: relative;
    }
    .fields-group input,
    .fields-group select {
      padding: var(--input-padding);
      border: 1.5px solid var(--border);
      border-radius: 9px;
      font-size: var(--input-font-size);
      outline: none;
      background: #fcfdff;
      transition: border-color var(--transition), box-shadow .12s;
      flex: 1 1 auto;
      min-width: 0;
    }
    .fields-group input:focus,
    .fields-group select:focus {
      border-color: var(--border-focus);
      box-shadow: 0 0 0 2px #805efd33;
    }
    .fields-group button {
      background: var(--accent-gradient);
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 9px 0 9px 0;
      font-size: 1.02rem;
      font-weight: 700;
      box-shadow: var(--btn-shadow);
      transition: background .2s, transform .14s;
      cursor: pointer;
      flex: 1 0 130px;
      min-width: 118px;
      max-width: 150px;
    }
    .fields-group button:active,
    .fields-group button:focus {
      background: var(--accent-dark);
      transform: scale(0.97);
    }
    @media (max-width: 1000px) {
      .fields-group { gap: 10px;}
    }
    @media (max-width: 700px) {
      .fields-group {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
      }
      .fields-group input,
      .fields-group select,
      .fields-group button {
        width: 100%;
        min-width: 0;
        max-width: none;
      }
    }
    @media (max-width: 480px) {
      .card {padding: 9px 2.5vw;}
      .fields-group { gap: 6px; }
    }
    .task-list {
      margin-top: 20px;
    }
    .task {
      display: flex;
      gap: 17px;
      align-items: flex-start;
      padding: 15px 15px 12px 15px;
      border-radius: 17px;
      border: 1.5px solid #e7e9fb;
      background: rgba(255,255,255,.93);
      box-shadow: 0 3px 12px #b3bdf866, 0 1.5px 4px #44d3ee13;
      position: relative;
      min-width: 0;
      margin-bottom: 13px;
      transition: box-shadow .16s, border-color .13s, transform .13s;
      z-index: 1;
      overflow: hidden;
      backdrop-filter: blur(1.9px);
    }
    .task:hover {
      box-shadow: 0 8px 32px #1a2c5077, 0 1.5px 9px #805efd22;
      border-color: #d4d4ff;
      transform: translateY(-3px) scale(1.013);
    }
    .task + .task { margin-top: 0;}
    @media (max-width: 540px) {
      .task { flex-direction: column; gap: 7px; align-items: stretch; }
      .actions { margin-left: 0; justify-content: flex-end; }
    }
    .checkbox {
      min-width: 26px;
      width: 26px;
      height: 26px;
      border-radius: 8px;
      border: 2.2px solid #a9aacb;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      margin-top: 4px;
      font-size: 19px;
      font-weight: 700;
      background: radial-gradient(circle 120% at 60% 20%, #e6eafb 85%, #c4d0fd 100%);
      color: var(--accent);
      box-shadow: 0 2px 10px #a1a8e712;
      user-select: none;
      transition: border-color .13s, background .17s, color .14s, transform .13s;
      outline: none;
      position: relative;
      overflow: hidden;
    }
    .checkbox:active {
      border-color: var(--accent);
      background: linear-gradient(120deg, #c3defa 0, #e8e4fe 100%);
      transform: scale(.97);
    }
    .checkbox::after {
      content: "";
      display: block;
      position: absolute;
      width: 38%;
      height: 140%;
      left: 51%;
      top: -35%;
      background: rgba(214,225,254,0.53);
      border-radius: 38% 65% 52% 70%;
      transform: rotate(18deg);
      pointer-events: none;
    }
    .task .meta {
      color: var(--muted);
      font-size: 14px;
      margin-top: 6px;
      white-space: normal;
      opacity: .95;
    }
    .title {
      font-weight: 700;
      font-size: 1.14em;
      word-break: break-word;
      letter-spacing: -.01em;
      color: #24284d;
      transition: color .16s;
      margin-bottom: 1.5px;
      line-height: 1.36;
    }
    .task.completed .title {
      text-decoration: line-through;
      color: #b8b9db !important;
      opacity: 0.77;
    }
    .pill {
      padding: 6px 12px;
      border-radius: 99px;
      font-size: 13px;
      background: linear-gradient(92deg, #f3efff 50%, #e6f7fc 100%);
      margin-left: 8px;
      font-weight: 600;
      color: var(--accent);
      border: 1px solid #e1ebfc;
      box-shadow: 0 1px 3px #91cdf422;
      letter-spacing: .01em;
      display: inline-block;
    }
    .pill.high {
      background: linear-gradient(90deg,#ffdcdc 60%, #ffe7e7 100%);
      color: #f04f6a;
      border: 1.5px solid #f7bfc3;
    }
    .pill.medium {
      background: linear-gradient(87deg, #fff2c0 60%, #fffbe7 100%);
      color: #b49b2e;
      border: 1.5px solid #ffe48d;
    }
    .pill.low {
      background: linear-gradient(95deg, #e8fee7 50%, #eafcf3 100%);
      color: #20ad61;
      border: 1.5px solid #a8edc6;
    }
    .actions {
      margin-left: auto;
      display: flex;
      gap: 8px;
      align-items: center;
      min-width: 0;
    }
    .actions button {
      background: transparent;
      border: 1px solid #e6e9ef;
      color: #7e80ba;
      font-size: 13.1px;
      font-weight: 600;
      border-radius: 7px;
      padding: 6px 10px;
      cursor: pointer;
      transition: border .12s, color .16s, background .16s, box-shadow .12s;
      outline: none;
      box-shadow: none;
    }
    .actions button:focus,
    .actions button:active {
      border-color: var(--accent);
      color: var(--accent-dark);
      background: #ece2fc44;
      box-shadow: 0 0 0 1.5px #b3a6ff4a;
    }
    .empty {
      text-align: center;
      color: var(--muted);
      padding: 36px 10px 24px 10px;
      font-size: 1.13rem;
      letter-spacing: 0;
      background: none;
      border-radius: 9px;
      margin-top: 14px;
      font-weight: 500;
    }
    .tip {
      margin-top: 23px;
      text-align: center;
      color: var(--accent-dark);
      font-size: 14.2px;
      background: linear-gradient(94deg, #ebefff 9%, #e3f3fc 100%);
      border-radius: 13px;
      padding: 14px 15px 12px 15px;
      letter-spacing: 0.01em;
      font-weight: 600;
      box-shadow: 0 1.2px 9px #cee3ff18;
      opacity: .98;
      margin-bottom: 24px;
    }
    .top-controls-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
      flex-wrap: wrap;
      gap: 12px;
    }
    .filters {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
      min-width: 0;
    }
    .filters label {
      font-size: 13px;
      color: var(--muted);
      font-weight: 500;
      margin-right: 4px;
      letter-spacing: 0.01em;
    }
    .filters select {
      background: #f7fafe;
      color: #454671;
      font-weight: 600;
      border: 1.5px solid var(--border);
      border-radius: 7px;
      padding: 6px 12px;
      font-size: 0.96rem;
      transition: border-color .14s;
      box-shadow: none;
    }
    .filters select:focus {
      border-color: var(--accent);
      background: #f0e7fe;
      outline: none;
    }
    .search {
      width: 235px;
      max-width: 100vw;
      font-size: 1.03rem;
      border: 1.6px solid var(--border);
      border-radius: 8px;
      padding: 11px 14px;
      background: #f6f8fd;
      color: #353764;
      transition: border-color var(--transition), background .15s;
      font-weight: 500;
      letter-spacing: .01em;
      box-shadow: 0 0.5px 4px #b5caff13;
    }
    .search:focus {
      border-color: var(--accent);
      background: #eceeff;
      outline: none;
    }
    @media (max-width: 700px) {
      .top-controls-row {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
      }
      .filters {
        flex-wrap: wrap;
      }
      .search { width: 100%; min-width: 0;}
    }
    @media (max-width:480px){
      .search{font-size:1.06em;}
      .filters{gap:6px;}
    }
    :focus-visible {
      outline: 2px solid #7f6eff88;
      outline-offset: 2px;
      transition: outline .15s;
    }
    @media print {
      body{padding:0}
      header .controls, .filters, .actions, .card form{display:none}
      .task{border:none;box-shadow:none;padding:7px}
      .task .meta{display:inline-block;margin-left:10px}
      .decorative-blob{display:none;}
      .tip{display:none;}
    }
    ::selection{background: #dbeafe;}
    .task.new-anim {
      animation: fadeInTask .55s cubic-bezier(.16,.68,.66,.97);
    }
    @keyframes fadeInTask{
      from{transform:scale(.98) translateY(16px);opacity:0}
      to{transform:none;opacity:1}
    }
  </style>
</head>
<body>
  <div class="decorative-blob"></div>
  <div class="app">
    <header>
      <h1><span style="vertical-align:-3px;font-size:1.2em;filter:drop-shadow(0 1.5px 2px #6357ff31)">📝</span> To-Do List</h1>
      <!-- Controls moved inside .card -->
    </header>

    <div class="card">

      <form id="addForm" autocomplete="off">
        <div class="fields-group">
          <input id="taskTitle" placeholder="Add a new task..." required autocomplete="off" />
          <input id="taskDue" type="date" />
          <select id="taskPriority">
            <option value="high">High</option>
            <option value="medium" selected>Medium</option>
            <option value="low">Low</option>
          </select>
          <select id="taskTag">
            <option value="Personal">Personal</option>
            <option value="Work" selected>Work</option>
            <option value="Study">Study</option>
          </select>
          <button class="btn" type="submit">Add <span style="font-size:1em;">➕</span></button>
        </div>
        <div class="card-controls">
          <button id="printBtn" class="ghost small" type="button" title="Print your task list">🖨 Print</button>
          <button id="clearBtn" class="ghost small" type="button" title="Clear all tasks">🗑 Clear All</button>
          <button id="exportBtn" class="btn small" type="button" title="Export your tasks as JSON"><span style="font-size:1.11em;vertical-align:-2px">⭳</span> Export</button>
        </div>
        <div class="top-controls-row">
          <div class="filters">
            <label class="small" for="filterStatus">Filter:</label>
            <select id="filterStatus" class="small">
              <option value="all">All</option>
              <option value="active">Active</option>
              <option value="completed">Completed</option>
            </select>
            <select id="filterPriority" class="small">
              <option value="all">All priorities</option>
              <option value="high">High</option>
              <option value="medium">Medium</option>
              <option value="low">Low</option>
            </select>
          </div>
          <div style="display:flex;gap:8px;align-items:center;width:100%;max-width:255px">
            <input id="search" placeholder="🔍 Search..." class="search" autocomplete="off" />
          </div>
        </div>
      </form>

      <div id="taskList" class="task-list"></div>
      <div id="empty" class="empty">🚀 No tasks yet — add your first one above!</div>
    </div>

    <div class="tip">
      <span style="font-size:1.22em;vertical-align:middle;">💡</span>
      Use <b>Enter</b> to add a task. Tasks are stored privately in your browser.
      <br /> <span style="color:#9d96e8">Tip</span>: <b>Ctrl+K</b> focuses search.
    </div>
  </div>

  <script>
    // interactive to-do list with localStorage
    const qs = s => document.querySelector(s)
    const $taskList = qs('#taskList')
    const $empty = qs('#empty')
    const STORAGE_KEY = 'interactive_todo_v1'

    let tasks = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]')

    function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks)) }
    function uid(){ return Date.now().toString(36) + Math.random().toString(36).slice(2,6) }
    function escapeHtml(s){ return String(s||'').replace(/[&<>"]+/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])) }
    function capitalize(s){ return s.charAt(0).toUpperCase()+s.slice(1) }
    function formatDate(d) {
      if(!d) return '';
      const dt = new Date(d);
      // Visual date with colored dot for overdue
      const isOverdue = !isNaN(dt) && dt < new Date() && !tasks.some(t=>t.due===d && t.done);
      return `<span title="${dt.toLocaleString()}" style="font-weight:600;color:${isOverdue?'#e34f5c':'#44479b'};">${
        isOverdue ? '⚠️ ' : ''
      }${dt.toLocaleDateString()}</span>`;
    }
    function addTask(data){
      tasks.unshift(Object.assign({
        id:uid(),
        title:'',
        due:'',
        priority:'medium',
        tag:'Personal',
        done:false,
        created:Date.now()
      }, data))
      save();
      render('anim');
    }

    function render(anim){
      $taskList.innerHTML = ''
      const filterStatus = qs('#filterStatus').value
      const filterPriority = qs('#filterPriority').value
      const q = qs('#search').value.toLowerCase()
      const visible = tasks.filter(t => {
        if(filterStatus === 'active' && t.done) return false
        if(filterStatus === 'completed' && !t.done) return false
        if(filterPriority !== 'all' && t.priority !== filterPriority) return false
        if(q && !(t.title.toLowerCase().includes(q) || (t.tag||'').toLowerCase().includes(q)))
          return false
        return true
      });

      $empty.style.display = visible.length === 0 ? 'block':'none'

      visible.forEach((task,i) => {
        const el = document.createElement('div')
        el.className = 'task' + (task.done ? ' completed':'') + (anim && i === 0 ? ' new-anim':'')
        el.dataset.id = task.id
        let pillClass = '';
        if (task.priority === 'high') pillClass = 'high';
        else if (task.priority === 'medium') pillClass = 'medium';
        else if (task.priority === 'low') pillClass = 'low';
        el.innerHTML = `
          <div class="checkbox" data-action="toggle" tabindex="0" title="Mark done">${task.done ? '✔' : ''}</div>
          <div style="min-width:0">
            <div class="title">${escapeHtml(task.title)}</div>
            <div class="meta">
              ${task.tag ? `<span style="font-weight:600;color:#43c6e4;">${escapeHtml(task.tag)}</span> · ` : ''}
              ${task.due ? formatDate(task.due) + ' · ' : ''}
              <span class="pill ${pillClass}">${capitalize(task.priority)}</span>
            </div>
          </div>
          <div class="actions">
            <button data-action="up" title="Move up">⬆</button>
            <button data-action="down" title="Move down">⬇</button>
            <button data-action="edit" title="Edit">✏️</button>
            <button data-action="delete" title="Delete">🗑</button>
          </div>
        `
        $taskList.appendChild(el)
      })
    }

    // Animation on first task add
    render()
    // form handlers
    qs('#addForm').addEventListener('submit', e => {
      e.preventDefault()
      const title = qs('#taskTitle').value.trim()
      if(!title) return
      addTask({
        title,
        due: qs('#taskDue').value || '',
        priority: qs('#taskPriority').value,
        tag: qs('#taskTag').value
      })
      qs('#taskTitle').value=''
      qs('#taskDue').value=''
      qs('#taskTitle').focus()
    })
    // delegated actions
    $taskList.addEventListener('click', e => {
      const action = e.target.dataset.action
      if(!action) return
      const id = e.target.closest('.task').dataset.id
      const idx = tasks.findIndex(t=>t.id===id)
      if(idx===-1) return
      if(action === 'toggle'){
        tasks[idx].done = !tasks[idx].done
      } else if(action === 'delete'){
        if(confirm('Delete this task?')) tasks.splice(idx,1)
      } else if(action === 'up'){
        if(idx>0){ const [t]=tasks.splice(idx,1); tasks.splice(idx-1,0,t) }
      } else if(action === 'down'){
        if(idx < tasks.length-1){ const [t]=tasks.splice(idx,1); tasks.splice(idx+1,0,t) }
      } else if(action === 'edit'){
        const t = tasks[idx]
        const newTitle = prompt('Edit task title', t.title)
        if(newTitle === null) return
        t.title = newTitle.trim() || t.title
      }
      save(); render()
    })
    // Checkbox: Space/Enter accessibility
    $taskList.addEventListener('keydown', e=>{
      if(e.target.classList.contains('checkbox') && (e.key===" "||e.key==="Enter")){
        e.preventDefault()
        e.target.click()
      }
    });
    // toggle done by clicking checkbox area
    $taskList.addEventListener('click', e => {
      if(e.target.classList.contains('checkbox')){
        const id = e.target.closest('.task').dataset.id
        const t = tasks.find(x=>x.id===id)
        if(t){ t.done = !t.done; save(); render(); }
      }
    })
    // filters/search
    qs('#filterStatus').addEventListener('change', ()=>render())
    qs('#filterPriority').addEventListener('change', ()=>render())
    qs('#search').addEventListener('input', ()=>render())
    // export
    qs('#exportBtn').addEventListener('click', () => {
      const blob = new Blob([JSON.stringify(tasks, null, 2)], {type: 'application/json'})
      const url = URL.createObjectURL(blob)
      const a = document.createElement('a'); a.href = url; a.download = 'todo-export.json'; a.click(); URL.revokeObjectURL(url)
    })
    // clear
    qs('#clearBtn').addEventListener('click', () => {
      if(confirm('Clear all tasks?')){ tasks=[]; save(); render() }
    })
    // print
    qs('#printBtn').addEventListener('click', () => window.print())
    // keyboard: Enter in taskTitle submits, Ctrl+K focuses search
    qs('#taskTitle').addEventListener('keydown', e => {
      if(e.key==='Enter'){
        e.preventDefault(); qs('#addForm').dispatchEvent(new Event('submit'))
      }
    })
    document.addEventListener('keydown', e => {
      if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='k'){
        e.preventDefault(); qs('#search').focus()
      }
    })
    // initial demo tasks if empty
    if(tasks.length===0){
      addTask({title:'Welcome! 🎉 Try adding your first task', priority:'medium', tag:'Personal'})
    }
  </script>
</body>
</html>
